<!DOCTYPE html>
<!-- saved from url=(0032)http://127.0.0.1:5500/index.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Tic Tac Toe Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;height:100vh;display:flex;justify-content:center;align-items:center;
  background:linear-gradient(135deg,#000428,#004e92);
}
.container{
  background:#000;padding:20px;border-radius:15px;
  box-shadow:0 0 25px cyan;width:90%;max-width:360px;text-align:center;
}
h1{color:cyan}
.status{color:white;margin:10px 0}
.board{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.cell{
  aspect-ratio:1/1;background:#111;border:2px solid cyan;
  font-size:40px;color:cyan;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
}
.controls{display:flex;justify-content:space-between;margin-top:15px}
button{
  padding:8px 14px;border:none;border-radius:5px;
  background:cyan;font-weight:bold;cursor:pointer
}
select{
  padding:6px;border-radius:5px;border:none;font-weight:bold
}

/* POPUPS */
.popup{
  position:fixed;inset:0;background:rgba(0,0,0,.85);
  display:flex;align-items:center;justify-content:center;
  visibility:hidden;z-index:10
}
.popup.show{visibility:visible}
.popup-box{
  background:#000;padding:25px;border-radius:12px;
  box-shadow:0 0 20px cyan;text-align:center
}
.popup-box h2{color:cyan;margin-bottom:15px}
.popup-box button{margin:6px}
</style>
</head>

<body>

<!-- HOME -->
<div class="popup" id="homePopup">
  <div class="popup-box">
    <h2>ðŸŽ® Tic Tac Toe</h2>
    <p style="color:white">Select Mode</p>
    <button onclick="startGame(&#39;pvp&#39;)">Player vs Player</button><br><br>
    <select id="difficulty">
      <option value="easy">Easy Bot</option>
      <option value="medium">Medium Bot</option>
      <option value="hard" selected="">Hard Bot</option>
    </select><br><br>
    <button onclick="startGame(&#39;bot&#39;)">Player vs Bot</button>
  </div>
</div>

<!-- RESULT -->
<div class="popup show" id="resultPopup">
  <div class="popup-box">
    <h2 id="resultText">It's a Draw!</h2>
    <button onclick="restart()">Restart</button>
    <button onclick="goHome()">Home</button>
  </div>
</div>

<div class="container">
  <h1>Tic Tac Toe</h1>
  <div class="status" id="status">Player X Turn</div>

  <div class="board">
    <div class="cell">X</div><div class="cell">O</div><div class="cell">X</div>
    <div class="cell">O</div><div class="cell">O</div><div class="cell">X</div>
    <div class="cell">X</div><div class="cell">X</div><div class="cell">O</div>
  </div>

  <div class="controls">
    <button onclick="restart()">Restart</button>
    <button onclick="goHome()">Home</button>
  </div>
</div>

<!-- SOUND -->
<audio id="clickSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
<audio id="drawSound" src="https://assets.mixkit.co/active_storage/sfx/2357/2357-preview.mp3"></audio>

<script>
const cells=document.querySelectorAll(".cell");
const statusText=document.getElementById("status");
const homePopup=document.getElementById("homePopup");
const resultPopup=document.getElementById("resultPopup");
const resultText=document.getElementById("resultText");
const difficultySelect=document.getElementById("difficulty");

const clickSound=document.getElementById("clickSound");
const winSound=document.getElementById("winSound");
const drawSound=document.getElementById("drawSound");

let board=["","","","","","","","",""];
let currentPlayer="X";
let gameMode="";
let gameActive=false;
let difficulty="hard";

const wins=[
[0,1,2],[3,4,5],[6,7,8],
[0,3,6],[1,4,7],[2,5,8],
[0,4,8],[2,4,6]
];

function startGame(mode){
  gameMode=mode;
  difficulty=difficultySelect.value;
  homePopup.classList.remove("show");
  resetBoard();
  gameActive=true;
  statusText.textContent="Player X Turn";
}

cells.forEach((cell,i)=>{
  cell.addEventListener("click",()=>{
    if(!gameActive||board[i])return;
    if(gameMode==="bot"&&currentPlayer==="O")return;
    makeMove(i);
    if(gameMode==="bot"&&gameActive&&currentPlayer==="O"){
      setTimeout(botMove,300);
    }
  });
});

function makeMove(i){
  clickSound.play();
  board[i]=currentPlayer;
  cells[i].textContent=currentPlayer;
  if(checkEnd())return;
  currentPlayer=currentPlayer==="X"?"O":"X";
  statusText.textContent=`Player ${currentPlayer} Turn`;
}

function botMove(){
  let move;
  if(difficulty==="easy"){
    move=randomMove();
  }else if(difficulty==="medium"){
    move=Math.random()<0.5?randomMove():minimax(board,"O").index;
  }else{
    move=minimax(board,"O").index;
  }
  board[move]="O";
  cells[move].textContent="O";
  if(checkEnd())return;
  currentPlayer="X";
  statusText.textContent="Player X Turn";
}

function randomMove(){
  let empty=board.map((v,i)=>v===""?i:null).filter(v=>v!==null);
  return empty[Math.floor(Math.random()*empty.length)];
}

/* MINIMAX */
function minimax(b,p){
  let empty=b.map((v,i)=>v===""?i:null).filter(v=>v!==null);
  if(winCheck(b,"X"))return{score:-10};
  if(winCheck(b,"O"))return{score:10};
  if(empty.length===0)return{score:0};

  let moves=[];
  for(let i of empty){
    let m={index:i};
    b[i]=p;
    m.score=minimax(b,p==="O"?"X":"O").score;
    b[i]="";
    moves.push(m);
  }

  return p==="O"
    ? moves.reduce((a,b)=>a.score>b.score?a:b)
    : moves.reduce((a,b)=>a.score<b.score?a:b);
}

function winCheck(b,p){
  return wins.some(w=>w.every(i=>b[i]===p));
}

function checkEnd(){
  if(winCheck(board,currentPlayer)){
    winSound.play();
    endGame(`Player ${currentPlayer} Wins!`);
    return true;
  }
  if(!board.includes("")){
    drawSound.play();
    endGame("It's a Draw!");
    return true;
  }
  return false;
}

function endGame(text){
  gameActive=false;
  resultText.textContent=text;
  resultPopup.classList.add("show");
}

function resetBoard(){
  board=["","","","","","","","",""];
  cells.forEach(c=>c.textContent="");
  currentPlayer="X";
}

function restart(){
  resetBoard();
  gameActive=true;
  resultPopup.classList.remove("show");
  statusText.textContent="Player X Turn";
}

function goHome(){
  gameActive=false;
  resetBoard();
  resultPopup.classList.remove("show");
  homePopup.classList.add("show");
  statusText.textContent="Waiting...";
}
</script>

<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


</body></html>